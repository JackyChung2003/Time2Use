import{c as ar}from"./classnames-BbTGAWaK.js";import{r as o}from"./react-Ck4LUVBC.js";import{c as Br,u as K,d as za,a as xa,r as ha,s as Na,e as La,f as Ba,h as Fa,i as _a,j as Ke,k as la,l as Aa,g as sa,m as Ua,n as Va}from"./rc-util-C0LYQZ5Y.js";import{h as qa,i as ja,_ as Qa,k as fa,e as W,a as Ja,d as Ga,c as H,f as va,g as Ta}from"./@babel-DIaYKQuy.js";import{F as Ha}from"./@ant-design-BoVh1Ei5.js";import{r as Ia}from"./react-dom-Ds7J2zyt.js";import{R as $a}from"./rc-resize-observer-B5ylZEVs.js";import{C as Ra}from"./rc-motion-Bd24aP47.js";var Ka=["b"],Za=["v"],ua=function(a){return Math.round(Number(a||0))},Ya=function(a){if(a instanceof Ha)return a;if(a&&Ga(a)==="object"&&"h"in a&&"b"in a){var r=a,n=r.b,t=fa(r,Ka);return W(W({},t),{},{v:n})}return typeof a=="string"&&/hsb/.test(a)?a.replace(/hsb/,"hsv"):a},ma=function(e){qa(r,e);var a=ja(r);function r(n){return Ja(this,r),a.call(this,Ya(n))}return Qa(r,[{key:"toHsbString",value:function(){var t=this.toHsb(),u=ua(t.s*100),s=ua(t.b*100),c=ua(t.h),d=t.a,h="hsb(".concat(c,", ").concat(u,"%, ").concat(s,"%)"),T="hsba(".concat(c,", ").concat(u,"%, ").concat(s,"%, ").concat(d.toFixed(d===0?0:2),")");return d===1?h:T}},{key:"toHsb",value:function(){var t=this.toHsv(),u=t.v,s=fa(t,Za);return W(W({},s),{},{b:u,a:this.a})}}]),r}(Ha),Xa=function(a){return a instanceof ma?a:new ma(a)};Xa("#1677ff");var Ea=o.createContext(null),ga=[];function Oa(e,a){var r=o.useState(function(){if(!Br())return null;var m=document.createElement("div");return m}),n=H(r,1),t=n[0],u=o.useRef(!1),s=o.useContext(Ea),c=o.useState(ga),d=H(c,2),h=d[0],T=d[1],g=s||(u.current?void 0:function(m){T(function(w){var S=[m].concat(va(w));return S})});function y(){t.parentElement||document.body.appendChild(t),u.current=!0}function v(){var m;(m=t.parentElement)===null||m===void 0||m.removeChild(t),u.current=!1}return K(function(){return e?s?s(y):y():v(),v},[e]),K(function(){h.length&&(h.forEach(function(m){return m()}),T(ga))},[h]),[t,g]}function pa(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var et="rc-util-locker-".concat(Date.now()),ya=0;function rt(e){var a=!!e,r=o.useState(function(){return ya+=1,"".concat(et,"_").concat(ya)}),n=H(r,1),t=n[0];K(function(){if(a){var u=za(document.body).width,s=pa();xa(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(u,"px);"):"",`
}`),t)}else ha(t);return function(){ha(t)}},[a,t])}var at=!1;function tt(e){return at}var Ca=function(a){return a===!1?!1:!Br()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},Wa=o.forwardRef(function(e,a){var r=e.open,n=e.autoLock,t=e.getContainer;e.debug;var u=e.autoDestroy,s=u===void 0?!0:u,c=e.children,d=o.useState(r),h=H(d,2),T=h[0],g=h[1],y=T||r;o.useEffect(function(){(s||r)&&g(r)},[r,s]);var v=o.useState(function(){return Ca(t)}),m=H(v,2),w=m[0],S=m[1];o.useEffect(function(){var te=Ca(t);S(te??null)});var k=Oa(y&&!w),R=H(k,2),N=R[0],_=R[1],z=w??N;rt(n&&r&&Br()&&(z===N||z===document.body));var f=null;if(c&&Na(c)&&a){var ve=c;f=ve.ref}var ce=La(f,a);if(!y||!Br()||w===void 0)return null;var ae=z===!1||tt(),Z=c;return a&&(Z=o.cloneElement(c,{ref:ce})),o.createElement(Ea.Provider,{value:_},ae?Z:Ia.createPortal(Z,z))});function nt(e){var a=e.prefixCls,r=e.align,n=e.arrow,t=e.arrowPos,u=n||{},s=u.className,c=u.content,d=t.x,h=d===void 0?0:d,T=t.y,g=T===void 0?0:T,y=o.useRef();if(!r||!r.points)return null;var v={position:"absolute"};if(r.autoArrow!==!1){var m=r.points[0],w=r.points[1],S=m[0],k=m[1],R=w[0],N=w[1];S===R||!["t","b"].includes(S)?v.top=g:S==="t"?v.top=0:v.bottom=0,k===N||!["l","r"].includes(k)?v.left=h:k==="l"?v.left=0:v.right=0}return o.createElement("div",{ref:y,className:ar("".concat(a,"-arrow"),s),style:v},c)}function ot(e){var a=e.prefixCls,r=e.open,n=e.zIndex,t=e.mask,u=e.motion;return t?o.createElement(Ra,Ta({},u,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var c=s.className;return o.createElement("div",{style:{zIndex:n},className:ar("".concat(a,"-mask"),c)})}):null}var it=o.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),ut=o.forwardRef(function(e,a){var r=e.popup,n=e.className,t=e.prefixCls,u=e.style,s=e.target,c=e.onVisibleChanged,d=e.open,h=e.keepDom,T=e.fresh,g=e.onClick,y=e.mask,v=e.arrow,m=e.arrowPos,w=e.align,S=e.motion,k=e.maskMotion,R=e.forceRender,N=e.getPopupContainer,_=e.autoDestroy,z=e.portal,f=e.zIndex,ve=e.onMouseEnter,ce=e.onMouseLeave,ae=e.onPointerEnter,Z=e.onPointerDownCapture,te=e.ready,Me=e.offsetX,we=e.offsetY,fe=e.offsetR,Se=e.offsetB,Q=e.onAlign,Pe=e.onPrepare,B=e.stretch,A=e.targetWidth,C=e.targetHeight,Be=typeof r=="function"?r():r,ne=d||h,F=(N==null?void 0:N.length)>0,b=o.useState(!N||!F),J=H(b,2),Fe=J[0],tr=J[1];if(K(function(){!Fe&&F&&s&&tr(!0)},[Fe,F,s]),!Fe)return null;var de="auto",G={left:"-1000vw",top:"-1000vh",right:de,bottom:de};if(te||!d){var Le,_e=w.points,Y=w.dynamicInset||((Le=w._experimental)===null||Le===void 0?void 0:Le.dynamicInset),he=Y&&_e[0][1]==="r",oe=Y&&_e[0][0]==="b";he?(G.right=fe,G.left=de):(G.left=Me,G.right=de),oe?(G.bottom=Se,G.top=de):(G.top=we,G.bottom=de)}var j={};return B&&(B.includes("height")&&C?j.height=C:B.includes("minHeight")&&C&&(j.minHeight=C),B.includes("width")&&A?j.width=A:B.includes("minWidth")&&A&&(j.minWidth=A)),d||(j.pointerEvents="none"),o.createElement(z,{open:R||ne,getContainer:N&&function(){return N(s)},autoDestroy:_},o.createElement(ot,{prefixCls:t,open:d,zIndex:f,mask:y,motion:k}),o.createElement($a,{onResize:Q,disabled:!d},function(nr){return o.createElement(Ra,Ta({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:R,leavedClassName:"".concat(t,"-hidden")},S,{onAppearPrepare:Pe,onEnterPrepare:Pe,visible:d,onVisibleChanged:function(X){var me;S==null||(me=S.onVisibleChanged)===null||me===void 0||me.call(S,X),c(X)}}),function(Te,X){var me=Te.className,Ae=Te.style,U=ar(t,me,n);return o.createElement("div",{ref:Ba(nr,a,X),className:U,style:W(W(W(W({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},G),j),Ae),{},{boxSizing:"border-box",zIndex:f},u),onMouseEnter:ve,onMouseLeave:ce,onPointerEnter:ae,onClick:g,onPointerDownCapture:Z},v&&o.createElement(nt,{prefixCls:t,arrow:v,arrowPos:m,align:w}),o.createElement(it,{cache:!d&&!T},Be))})}))}),lt=o.forwardRef(function(e,a){var r=e.children,n=e.getTriggerDOMNode,t=Na(r),u=o.useCallback(function(c){Fa(a,n?n(c):c)},[n]),s=La(u,_a(r));return t?o.cloneElement(r,{ref:s}):r}),ba=o.createContext(null);function Ma(e){return e?Array.isArray(e)?e:[e]:[]}function st(e,a,r,n){return o.useMemo(function(){var t=Ma(r??a),u=Ma(n??a),s=new Set(t),c=new Set(u);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[s,c]},[e,a,r,n])}function vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function ct(e,a,r,n){for(var t=r.points,u=Object.keys(e),s=0;s<u.length;s+=1){var c,d=u[s];if(vt((c=e[d])===null||c===void 0?void 0:c.points,t,n))return"".concat(a,"-placement-").concat(d)}return""}function wa(e,a,r,n){return a||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function mr(e){return e.ownerDocument.defaultView}function ca(e){for(var a=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var t=mr(r).getComputedStyle(r),u=t.overflowX,s=t.overflowY,c=t.overflow;[u,s,c].some(function(d){return n.includes(d)})&&a.push(r),r=r.parentElement}return a}function hr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function dr(e){return hr(parseFloat(e),0)}function Sa(e,a){var r=W({},e);return(a||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var t=mr(n).getComputedStyle(n),u=t.overflow,s=t.overflowClipMargin,c=t.borderTopWidth,d=t.borderBottomWidth,h=t.borderLeftWidth,T=t.borderRightWidth,g=n.getBoundingClientRect(),y=n.offsetHeight,v=n.clientHeight,m=n.offsetWidth,w=n.clientWidth,S=dr(c),k=dr(d),R=dr(h),N=dr(T),_=hr(Math.round(g.width/m*1e3)/1e3),z=hr(Math.round(g.height/y*1e3)/1e3),f=(m-w-R-N)*_,ve=(y-v-S-k)*z,ce=S*z,ae=k*z,Z=R*_,te=N*_,Me=0,we=0;if(u==="clip"){var fe=dr(s);Me=fe*_,we=fe*z}var Se=g.x+Z-Me,Q=g.y+ce-we,Pe=Se+g.width+2*Me-Z-te-f,B=Q+g.height+2*we-ce-ae-ve;r.left=Math.max(r.left,Se),r.top=Math.max(r.top,Q),r.right=Math.min(r.right,Pe),r.bottom=Math.min(r.bottom,B)}}),r}function Pa(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Da(e,a){var r=a||[],n=H(r,2),t=n[0],u=n[1];return[Pa(e.width,t),Pa(e.height,u)]}function ka(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function rr(e,a){var r=a[0],n=a[1],t,u;return r==="t"?u=e.y:r==="b"?u=e.y+e.height:u=e.y+e.height/2,n==="l"?t=e.x:n==="r"?t=e.x+e.width:t=e.x+e.width/2,{x:t,y:u}}function xe(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,t){return t===a?r[n]||"c":n}).join("")}function ft(e,a,r,n,t,u,s){var c=o.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:t[n]||{}}),d=H(c,2),h=d[0],T=d[1],g=o.useRef(0),y=o.useMemo(function(){return a?ca(a):[]},[a]),v=o.useRef({}),m=function(){v.current={}};e||m();var w=Ke(function(){if(a&&r&&e){let re=function(er,We){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gr,fr=b.x+er,Wr=b.y+We,ta=fr+he,na=Wr+Y,oa=Math.max(fr,ze.left),i=Math.max(Wr,ze.top),l=Math.min(ta,ze.right),L=Math.min(na,ze.bottom);return Math.max(0,(l-oa)*(L-i))},Er=function(){je=b.y+D,Qe=je+Y,ke=b.x+M,Ye=ke+he};var R,N,_,z,f=a,ve=f.ownerDocument,ce=mr(f),ae=ce.getComputedStyle(f),Z=ae.width,te=ae.height,Me=ae.position,we=f.style.left,fe=f.style.top,Se=f.style.right,Q=f.style.bottom,Pe=f.style.overflow,B=W(W({},t[n]),u),A=ve.createElement("div");(R=f.parentElement)===null||R===void 0||R.appendChild(A),A.style.left="".concat(f.offsetLeft,"px"),A.style.top="".concat(f.offsetTop,"px"),A.style.position=Me,A.style.height="".concat(f.offsetHeight,"px"),A.style.width="".concat(f.offsetWidth,"px"),f.style.left="0",f.style.top="0",f.style.right="auto",f.style.bottom="auto",f.style.overflow="hidden";var C;if(Array.isArray(r))C={x:r[0],y:r[1],width:0,height:0};else{var Be,ne,F=r.getBoundingClientRect();F.x=(Be=F.x)!==null&&Be!==void 0?Be:F.left,F.y=(ne=F.y)!==null&&ne!==void 0?ne:F.top,C={x:F.x,y:F.y,width:F.width,height:F.height}}var b=f.getBoundingClientRect();b.x=(N=b.x)!==null&&N!==void 0?N:b.left,b.y=(_=b.y)!==null&&_!==void 0?_:b.top;var J=ve.documentElement,Fe=J.clientWidth,tr=J.clientHeight,de=J.scrollWidth,G=J.scrollHeight,Le=J.scrollTop,_e=J.scrollLeft,Y=b.height,he=b.width,oe=C.height,j=C.width,nr={left:0,top:0,right:Fe,bottom:tr},Te={left:-_e,top:-Le,right:de-_e,bottom:G-Le},X=B.htmlRegion,me="visible",Ae="visibleFirst";X!=="scroll"&&X!==Ae&&(X=me);var U=X===Ae,Fr=Sa(Te,y),P=Sa(nr,y),gr=X===me?P:Fr,Ue=U?P:gr;f.style.left="auto",f.style.top="auto",f.style.right="0",f.style.bottom="0";var V=f.getBoundingClientRect();f.style.left=we,f.style.top=fe,f.style.right=Se,f.style.bottom=Q,f.style.overflow=Pe,(z=f.parentElement)===null||z===void 0||z.removeChild(A);var He=hr(Math.round(he/parseFloat(Z)*1e3)/1e3),De=hr(Math.round(Y/parseFloat(te)*1e3)/1e3);if(He===0||De===0||la(r)&&!Aa(r))return;var _r=B.offset,Ar=B.targetOffset,yr=Da(b,_r),ie=H(yr,2),ue=ie[0],O=ie[1],Ur=Da(C,Ar),Ve=H(Ur,2),p=Ve[0],$e=Ve[1];C.x-=p,C.y-=$e;var Vr=B.points||[],Cr=H(Vr,2),qr=Cr[0],jr=Cr[1],ge=ka(jr),I=ka(qr),or=rr(C,ge),q=rr(b,I),Re=W({},B),M=or.x-q.x+ue,D=or.y-q.y+O,le=re(M,D),qe=re(M,D,P),ir=rr(C,["t","l"]),ee=rr(b,["t","l"]),br=rr(C,["b","r"]),ur=rr(b,["b","r"]),Ee=B.overflow||{},Mr=Ee.adjustX,Qr=Ee.adjustY,lr=Ee.shiftX,Ze=Ee.shiftY,sr=function(We){return typeof We=="boolean"?We:We>=0},je,Qe,ke,Ye;Er();var Je=sr(Qr),wr=I[0]===ge[0];if(Je&&I[0]==="t"&&(Qe>Ue.bottom||v.current.bt)){var x=D;wr?x-=Y-oe:x=ir.y-ur.y-O;var Sr=re(M,x),Jr=re(M,x,P);Sr>le||Sr===le&&(!U||Jr>=qe)?(v.current.bt=!0,D=x,O=-O,Re.points=[xe(I,0),xe(ge,0)]):v.current.bt=!1}if(Je&&I[0]==="b"&&(je<Ue.top||v.current.tb)){var Ge=D;wr?Ge+=Y-oe:Ge=br.y-ee.y-O;var Pr=re(M,Ge),Gr=re(M,Ge,P);Pr>le||Pr===le&&(!U||Gr>=qe)?(v.current.tb=!0,D=Ge,O=-O,Re.points=[xe(I,0),xe(ge,0)]):v.current.tb=!1}var Dr=sr(Mr),kr=I[1]===ge[1];if(Dr&&I[1]==="l"&&(Ye>Ue.right||v.current.rl)){var Ie=M;kr?Ie-=he-j:Ie=ir.x-ur.x-ue;var Nr=re(Ie,D),Xe=re(Ie,D,P);Nr>le||Nr===le&&(!U||Xe>=qe)?(v.current.rl=!0,M=Ie,ue=-ue,Re.points=[xe(I,1),xe(ge,1)]):v.current.rl=!1}if(Dr&&I[1]==="r"&&(ke<Ue.left||v.current.lr)){var Ne=M;kr?Ne+=he-j:Ne=br.x-ee.x-ue;var Lr=re(Ne,D),Tr=re(Ne,D,P);Lr>le||Lr===le&&(!U||Tr>=qe)?(v.current.lr=!0,M=Ne,ue=-ue,Re.points=[xe(I,1),xe(ge,1)]):v.current.lr=!1}Er();var ye=lr===!0?0:lr;typeof ye=="number"&&(ke<P.left&&(M-=ke-P.left-ue,C.x+j<P.left+ye&&(M+=C.x-P.left+j-ye)),Ye>P.right&&(M-=Ye-P.right-ue,C.x>P.right-ye&&(M+=C.x-P.right+ye)));var se=Ze===!0?0:Ze;typeof se=="number"&&(je<P.top&&(D-=je-P.top-O,C.y+oe<P.top+se&&(D+=C.y-P.top+oe-se)),Qe>P.bottom&&(D-=Qe-P.bottom-O,C.y>P.bottom-se&&(D+=C.y-P.bottom+se)));var Oe=b.x+M,pe=Oe+he,Ce=b.y+D,Ir=Ce+Y,Hr=C.x,Kr=Hr+j,vr=C.y,Zr=vr+oe,Yr=Math.max(Oe,Hr),Xr=Math.min(pe,Kr),$r=(Yr+Xr)/2,Or=$r-Oe,pr=Math.max(Ce,vr),Rr=Math.min(Ir,Zr),ea=(pr+Rr)/2,ra=ea-Ce;s==null||s(a,Re);var cr=V.right-b.x-(M+b.width),be=V.bottom-b.y-(D+b.height);He===1&&(M=Math.round(M),cr=Math.round(cr)),De===1&&(D=Math.round(D),be=Math.round(be));var aa={ready:!0,offsetX:M/He,offsetY:D/De,offsetR:cr/He,offsetB:be/De,arrowX:Or/He,arrowY:ra/De,scaleX:He,scaleY:De,align:Re};T(aa)}}),S=function(){g.current+=1;var N=g.current;Promise.resolve().then(function(){g.current===N&&w()})},k=function(){T(function(N){return W(W({},N),{},{ready:!1})})};return K(k,[n]),K(function(){e||k()},[e]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,S]}function dt(e,a,r,n,t){K(function(){if(e&&a&&r){let g=function(){n(),t()};var u=a,s=r,c=ca(u),d=ca(s),h=mr(s),T=new Set([h].concat(va(c),va(d)));return T.forEach(function(y){y.addEventListener("scroll",g,{passive:!0})}),h.addEventListener("resize",g,{passive:!0}),n(),function(){T.forEach(function(y){y.removeEventListener("scroll",g),h.removeEventListener("resize",g)})}}},[e,a,r])}function ht(e,a,r,n,t,u,s,c){var d=o.useRef(e);d.current=e;var h=o.useRef(!1);o.useEffect(function(){if(a&&n&&(!t||u)){var g=function(){h.current=!1},y=function(S){var k;d.current&&!s(((k=S.composedPath)===null||k===void 0||(k=k.call(S))===null||k===void 0?void 0:k[0])||S.target)&&!h.current&&c(!1)},v=mr(n);v.addEventListener("pointerdown",g,!0),v.addEventListener("mousedown",y,!0),v.addEventListener("contextmenu",y,!0);var m=sa(r);return m&&(m.addEventListener("mousedown",y,!0),m.addEventListener("contextmenu",y,!0)),function(){v.removeEventListener("pointerdown",g,!0),v.removeEventListener("mousedown",y,!0),v.removeEventListener("contextmenu",y,!0),m&&(m.removeEventListener("mousedown",y,!0),m.removeEventListener("contextmenu",y,!0))}}},[a,r,n,t,u]);function T(){h.current=!0}return T}var mt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function gt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wa,a=o.forwardRef(function(r,n){var t=r.prefixCls,u=t===void 0?"rc-trigger-popup":t,s=r.children,c=r.action,d=c===void 0?"hover":c,h=r.showAction,T=r.hideAction,g=r.popupVisible,y=r.defaultPopupVisible,v=r.onPopupVisibleChange,m=r.afterPopupVisibleChange,w=r.mouseEnterDelay,S=r.mouseLeaveDelay,k=S===void 0?.1:S,R=r.focusDelay,N=r.blurDelay,_=r.mask,z=r.maskClosable,f=z===void 0?!0:z,ve=r.getPopupContainer,ce=r.forceRender,ae=r.autoDestroy,Z=r.destroyPopupOnHide,te=r.popup,Me=r.popupClassName,we=r.popupStyle,fe=r.popupPlacement,Se=r.builtinPlacements,Q=Se===void 0?{}:Se,Pe=r.popupAlign,B=r.zIndex,A=r.stretch,C=r.getPopupClassNameFromAlign,Be=r.fresh,ne=r.alignPoint,F=r.onPopupClick,b=r.onPopupAlign,J=r.arrow,Fe=r.popupMotion,tr=r.maskMotion,de=r.popupTransitionName,G=r.popupAnimation,Le=r.maskTransitionName,_e=r.maskAnimation,Y=r.className,he=r.getTriggerDOMNode,oe=fa(r,mt),j=ae||Z||!1,nr=o.useState(!1),Te=H(nr,2),X=Te[0],me=Te[1];K(function(){me(Ua())},[]);var Ae=o.useRef({}),U=o.useContext(ba),Fr=o.useMemo(function(){return{registerSubPopup:function(l,L){Ae.current[l]=L,U==null||U.registerSubPopup(l,L)}}},[U]),P=Va(),gr=o.useState(null),Ue=H(gr,2),V=Ue[0],He=Ue[1],De=o.useRef(null),_r=Ke(function(i){De.current=i,la(i)&&V!==i&&He(i),U==null||U.registerSubPopup(P,i)}),Ar=o.useState(null),yr=H(Ar,2),ie=yr[0],ue=yr[1],O=o.useRef(null),Ur=Ke(function(i){la(i)&&ie!==i&&(ue(i),O.current=i)}),Ve=o.Children.only(s),p=(Ve==null?void 0:Ve.props)||{},$e={},Vr=Ke(function(i){var l,L,E=ie;return(E==null?void 0:E.contains(i))||((l=sa(E))===null||l===void 0?void 0:l.host)===i||i===E||(V==null?void 0:V.contains(i))||((L=sa(V))===null||L===void 0?void 0:L.host)===i||i===V||Object.values(Ae.current).some(function($){return($==null?void 0:$.contains(i))||i===$})}),Cr=wa(u,Fe,G,de),qr=wa(u,tr,_e,Le),jr=o.useState(y||!1),ge=H(jr,2),I=ge[0],or=ge[1],q=g??I,Re=Ke(function(i){g===void 0&&or(i)});K(function(){or(g||!1)},[g]);var M=o.useRef(q);M.current=q;var D=o.useRef([]);D.current=[];var le=Ke(function(i){var l;Re(i),((l=D.current[D.current.length-1])!==null&&l!==void 0?l:q)!==i&&(D.current.push(i),v==null||v(i))}),qe=o.useRef(),ir=function(){clearTimeout(qe.current)},ee=function(l){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ir(),L===0?le(l):qe.current=setTimeout(function(){le(l)},L*1e3)};o.useEffect(function(){return ir},[]);var br=o.useState(!1),ur=H(br,2),Ee=ur[0],Mr=ur[1];K(function(i){(!i||q)&&Mr(!0)},[q]);var Qr=o.useState(null),lr=H(Qr,2),Ze=lr[0],sr=lr[1],je=o.useState(null),Qe=H(je,2),ke=Qe[0],Ye=Qe[1],Je=function(l){Ye([l.clientX,l.clientY])},wr=ft(q,V,ne&&ke!==null?ke:ie,fe,Q,Pe,b),x=H(wr,11),Sr=x[0],Jr=x[1],Ge=x[2],Pr=x[3],Gr=x[4],Dr=x[5],kr=x[6],Ie=x[7],Nr=x[8],Xe=x[9],Ne=x[10],Lr=st(X,d,h,T),Tr=H(Lr,2),ye=Tr[0],se=Tr[1],Oe=ye.has("click"),pe=se.has("click")||se.has("contextMenu"),Ce=Ke(function(){Ee||Ne()}),Ir=function(){M.current&&ne&&pe&&ee(!1)};dt(q,ie,V,Ce,Ir),K(function(){Ce()},[ke,fe]),K(function(){q&&!(Q!=null&&Q[fe])&&Ce()},[JSON.stringify(Pe)]);var Hr=o.useMemo(function(){var i=ct(Q,u,Xe,ne);return ar(i,C==null?void 0:C(Xe))},[Xe,C,Q,u,ne]);o.useImperativeHandle(n,function(){return{nativeElement:O.current,popupElement:De.current,forceAlign:Ce}});var Kr=o.useState(0),vr=H(Kr,2),Zr=vr[0],Yr=vr[1],Xr=o.useState(0),$r=H(Xr,2),Or=$r[0],pr=$r[1],Rr=function(){if(A&&ie){var l=ie.getBoundingClientRect();Yr(l.width),pr(l.height)}},ea=function(){Rr(),Ce()},ra=function(l){Mr(!1),Ne(),m==null||m(l)},cr=function(){return new Promise(function(l){Rr(),sr(function(){return l})})};K(function(){Ze&&(Ne(),Ze(),sr(null))},[Ze]);function be(i,l,L,E){$e[i]=function($){var zr;E==null||E($),ee(l,L);for(var ia=arguments.length,da=new Array(ia>1?ia-1:0),xr=1;xr<ia;xr++)da[xr-1]=arguments[xr];(zr=p[i])===null||zr===void 0||zr.call.apply(zr,[p,$].concat(da))}}(Oe||pe)&&($e.onClick=function(i){var l;M.current&&pe?ee(!1):!M.current&&Oe&&(Je(i),ee(!0));for(var L=arguments.length,E=new Array(L>1?L-1:0),$=1;$<L;$++)E[$-1]=arguments[$];(l=p.onClick)===null||l===void 0||l.call.apply(l,[p,i].concat(E))});var aa=ht(q,pe,ie,V,_,f,Vr,ee),re=ye.has("hover"),Er=se.has("hover"),er,We;re&&(be("onMouseEnter",!0,w,function(i){Je(i)}),be("onPointerEnter",!0,w,function(i){Je(i)}),er=function(l){(q||Ee)&&V!==null&&V!==void 0&&V.contains(l.target)&&ee(!0,w)},ne&&($e.onMouseMove=function(i){var l;(l=p.onMouseMove)===null||l===void 0||l.call(p,i)})),Er&&(be("onMouseLeave",!1,k),be("onPointerLeave",!1,k),We=function(){ee(!1,k)}),ye.has("focus")&&be("onFocus",!0,R),se.has("focus")&&be("onBlur",!1,N),ye.has("contextMenu")&&($e.onContextMenu=function(i){var l;M.current&&se.has("contextMenu")?ee(!1):(Je(i),ee(!0)),i.preventDefault();for(var L=arguments.length,E=new Array(L>1?L-1:0),$=1;$<L;$++)E[$-1]=arguments[$];(l=p.onContextMenu)===null||l===void 0||l.call.apply(l,[p,i].concat(E))}),Y&&($e.className=ar(p.className,Y));var ze=W(W({},p),$e),fr={},Wr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Wr.forEach(function(i){oe[i]&&(fr[i]=function(){for(var l,L=arguments.length,E=new Array(L),$=0;$<L;$++)E[$]=arguments[$];(l=ze[i])===null||l===void 0||l.call.apply(l,[ze].concat(E)),oe[i].apply(oe,E)})});var ta=o.cloneElement(Ve,W(W({},ze),fr)),na={x:Dr,y:kr},oa=J?W({},J!==!0?J:{}):null;return o.createElement(o.Fragment,null,o.createElement($a,{disabled:!q,ref:Ur,onResize:ea},o.createElement(lt,{getTriggerDOMNode:he},ta)),o.createElement(ba.Provider,{value:Fr},o.createElement(ut,{portal:e,ref:_r,prefixCls:u,popup:te,className:ar(Me,Hr),style:we,target:ie,onMouseEnter:er,onMouseLeave:We,onPointerEnter:er,zIndex:B,open:q,keepDom:Ee,fresh:Be,onClick:F,onPointerDownCapture:aa,mask:_,motion:Cr,maskMotion:qr,onVisibleChanged:ra,onPrepare:cr,forceRender:ce,autoDestroy:j,getPopupContainer:ve,align:Xe,arrow:oa,arrowPos:na,ready:Sr,offsetX:Jr,offsetY:Ge,offsetR:Pr,offsetB:Gr,onAlign:Ce,stretch:A,targetWidth:Zr/Ie,targetHeight:Or/Nr})))});return a}const kt=gt(Wa);export{ma as C,kt as T};
